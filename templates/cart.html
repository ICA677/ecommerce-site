<!-- templates/cart.html -->
{% extends "base.html" %} {% block title %}æˆ‘çš„è´­ç‰©è½¦{% endblock %} {% block
content %}
<div class="container mt-4">
  <h2>ğŸ›’ æˆ‘çš„è´­ç‰©è½¦</h2>

  {% if items %}
  <table class="table table-hover">
    <thead>
      <tr>
        <th>å•†å“</th>
        <th>å•ä»·</th>
        <th>æ•°é‡</th>
        <th>å°è®¡</th>
        <th>æ“ä½œ</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>
          <img
            src="{{ url_for('static', filename=item.product.image_url) }}"
            width="50"
            class="me-2"
          />
          {{ item.product.name }}
        </td>
        <td>Â¥{{ item.product.price }}</td>
        <td>
          <form
            method="POST"
            action="{{ url_for('update_cart', item_id=item.id) }}"
            style="display: inline"
          >
            <input
              type="number"
              name="quantity"
              value="{{ item.quantity }}"
              min="1"
              max="99"
              style="width: 60px"
              onchange="this.form.submit()"
            />
          </form>
        </td>
        <td>Â¥{{ (item.product.price * item.quantity) | round(2) }}</td>
        <td>
          <a
            href="{{ url_for('remove_from_cart', item_id=item.id) }}"
            class="btn btn-sm btn-outline-danger"
            onclick="return confirm('ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ')"
            >åˆ é™¤</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="d-flex justify-content-between align-items-center">
    <h4>æ€»è®¡ï¼šÂ¥{{ total | round(2) }}</h4>
    <form method="POST" action="{{ url_for('checkout') }}">
      <button type="submit" class="btn btn-success btn-lg">å»ç»“ç®—</button>
    </form>
  </div>

  {% else %}
  <div class="alert alert-info">
    è´­ç‰©è½¦æ˜¯ç©ºçš„<br />
    <a href="{{ url_for('index') }}">å»é€›é€›å•†å“å§</a>
  </div>
  {% endif %}
</div>
{% endblock %}
